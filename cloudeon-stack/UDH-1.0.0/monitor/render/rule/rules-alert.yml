groups:
  - name: internal-service
    # rules：定义规则
    rules:
        # alert：告警规则的名称
        -   alert: 主机内存使用率
            expr: (1-(node_memory_MemAvailable_bytes/(node_memory_MemTotal_bytes)))*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 1234
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机CPU使用率
            expr: (1-avg(irate(node_cpu_seconds_total{mode="idle"}[5m]))by(instance))*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 444
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机CPU系统使用率
            expr: avg(irate(node_cpu_seconds_total{mode="system"}[5m]))by(instance)*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: cpu使用过高，评估是否有任务倾斜
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机CPU用户使用率
            expr: avg(irate(node_cpu_seconds_total{mode="user"}[5m]))by(instance)*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: cpu使用过高，评估是否有任务倾斜
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机磁盘IO使用率
            expr: avg(irate(node_cpu_seconds_total{mode="iowait"}[5m]))by(instance)*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 磁盘IO过高，评估任务执行是否过于密集
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机交换分区使用率
            expr: (1-((node_memory_SwapFree_bytes+1)/(node_memory_SwapTotal_bytes+1)))*100 > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 主机交换分区使用率过高，评估是否存在任务密集执行
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机磁盘使用率
            expr: (node_filesystem_size_bytes{fstype=~"ext.*|xfs",mountpoint!~".*pod.*"}-node_filesystem_free_bytes{fstype=~"ext.*|xfs",mountpoint!~".*pod.*"})*100/(node_filesystem_avail_bytes{fstype=~"ext.*|xfs",mountpoint!~".*pod.*"}+(node_filesystem_size_bytes{fstype=~"ext.*|xfs",mountpoint!~".*pod.*"}-node_filesystem_free_bytes{fstype=~"ext.*|xfs",mountpoint!~".*pod.*"})) > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 1
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机入网带宽
            expr: irate(node_network_receive_bytes_total[5m])*8 > 8589934592
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 网络流量过高
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机出网带宽
            expr: irate(node_network_transmit_bytes_total[5m])*8 > 8589934592
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 网络流量过高
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 系统平均负载[1m]
            expr: node_load1 > 100
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 系统负载过高
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 系统平均负载[5m]
            expr: node_load5 > 100
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 系统负载过高
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 系统平均负载[15m]
            expr: node_load15 > 100
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 系统负载过高
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNode进程存活
            expr: up{job="namenode"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 查看日志，分析宕机原因，解决问题后重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNodeRPC延迟[5m]
            expr: avg_over_time(Hadoop_NameNode_RpcProcessingTimeAvgTime{job="HDFS-NameNode"}[5m]) > 5
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请检查网络流量使用情况
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNodeRPC延迟[15m]
            expr: avg_over_time(Hadoop_NameNode_RpcProcessingTimeAvgTime{job="HDFS-NameNode"}[15m]) > 5
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请检查网络流量使用情况
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNode堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="HDFS-NameNode"}*100/java_lang_Memory_HeapMemoryUsage_max{job="HDFS-NameNode"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: NameNode堆内存不足，增大NameNode堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNode老年代GC持续时间[5m]
            expr: avg_over_time(Hadoop_NameNode_GcTimeMillisConcurrentMarkSweep{job="HDFS-NameNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 老年代GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNode新生代GC持续时间[5m]
            expr: avg_over_time(Hadoop_NameNode_GcTimeMillisParNew{job="HDFS-NameNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 新生代GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NameNodeGC持续时间[5m]
            expr: avg_over_time(Hadoop_NameNode_GcTimeMillis{job="HDFS-NameNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNode进程存活
            expr: up{job="datanode"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 查看日志，分析宕机原因，解决问题后重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNodeRPC[5m]
            expr: avg_over_time(Hadoop_DataNode_RpcProcessingTimeAvgTime{job="HDFS-DataNode"}[5m]) > 5
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请检查网络流量使用情况
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNodeRPC[15m]
            expr: avg_over_time(Hadoop_DataNode_RpcProcessingTimeAvgTime{job="HDFS-DataNode"}[15m]) > 5
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请检查网络流量使用情况
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNode堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="HDFS-DataNode"}*100/java_lang_Memory_HeapMemoryUsage_max{job="HDFS-DataNode"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: NameNode堆内存不足，增大NameNode堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNode老年代GC持续时间[5m]
            expr: avg_over_time(Hadoop_DataNode_GcTimeMillisConcurrentMarkSweep{job="HDFS-DataNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 老年代GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNode新生代GC持续时间[5m]
            expr: avg_over_time(Hadoop_DataNode_GcTimeMillisParNew{job="HDFS-DataNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 新生代GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: DataNodeGC持续时间[5m]
            expr: avg_over_time(Hadoop_DataNode_GcTimeMillis{job="HDFS-DataNode"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: DataNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: GC时间过长，可考虑加大堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: JournalNode进程存活
            expr: up{job="journalnode"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: JournalNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: JournalNode宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ZKFailoverController进程存活
            expr: up{job="zkfc"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: ZKFC
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: ZKFC宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HDFS坏盘
            expr: Hadoop_NameNode_VolumeFailuresTotal{name="FSNamesystem"} > 0
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 存在坏盘
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HDFS块丢失
            expr: Hadoop_NameNode_MissingBlocks{name="FSNamesystem"} > 0
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NameNode
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 存在块丢失
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: AlertManager进程存活
            expr: up{job="alertmanager"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: AlertManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: AlertManager宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: Grafana进程存活
            expr: up{job="grafana"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: Grafana
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: Grafana宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HBaseMaster进程存活
            expr: up{job="hbasemaster"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: HbaseMaster
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: Hbase Master宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HRegionServer进程存活
            expr: up{job="regionserver"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: RegionServer
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: RegionServer宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveServer2进程存活
            expr: up{job="hiveserver2"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: HiveServer2
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: HiveServer2宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveServer2堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="HIVE-HiveServer2"}*100/java_lang_Memory_HeapMemoryUsage_max{job="HIVE-HiveServer2"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveServer2
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: HiveServer2堆内存不足，增大NameNode堆内存
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveServer2老年代GC持续时间[5m]
            expr: avg_over_time(java_lang_GarbageCollector_CollectionTime{job="HIVE-HiveServer2",name="PS MarkSweep"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveServer2
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveServer2新生代GC持续时间[5m]
            expr: avg_over_time(java_lang_GarbageCollector_CollectionTime{job="HIVE-HiveServer2",name="PS Scavenge"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveServer2
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveMetastore进程存活
            expr: up{job="hivemetastore"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: HiveMetaStore
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: HiveMetastore宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveMetastore堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="HIVE-MetaStore"}*100/java_lang_Memory_HeapMemoryUsage_max{job="HIVE-MetaStore"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveMetaStore
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveMetastore老年代GC持续时间[5m]
            expr: avg_over_time(java_lang_GarbageCollector_CollectionTime{job="HIVE-MetaStore",name="PS MarkSweep"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveMetaStore
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: HiveMetastore新生代GC持续时间[5m]
            expr: avg_over_time(java_lang_GarbageCollector_CollectionTime{job="HIVE-MetaStore",name="PS Scavenge"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: HiveMetaStore
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: Prometheus进程存活
            expr: up{job="prometheus"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: Prometheus
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: Prometheus宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: RangerServer进程存活
            expr: up{job="rangeradmin"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: RangerAdmin
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: SparkHistoryServer进程存活
            expr: up{job="sparkhistoryserver"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: SparkHistoryServer
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ZK进程存活
            expr: up{job="zkserver"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: ZkServer
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: zk宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ResourceManager进程存活
            expr: up{job="resourcemanager"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: ResourceManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: ResourceManager宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ResourceManager堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="YARN-ResourceManager"}*100/java_lang_Memory_HeapMemoryUsage_max{job="YARN-ResourceManager"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: ResourceManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ResourceManager老年代GC持续时间[5m]
            expr: avg_over_time(Hadoop_ResourceManager_GcTimeMillisPS_MarkSweep{job="YARN-ResourceManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: ResourceManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ResourceManager新生代GC持续时间[5m]
            expr: avg_over_time(Hadoop_ResourceManager_GcTimeMillisPS_Scavenge{job="YARN-ResourceManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: ResourceManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ResourceManagerGC持续时间[5m]
            expr: avg_over_time(Hadoop_ResourceManager_GcTimeMillis{job="YARN-ResourceManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: ResourceManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NodeManager进程存活
            expr: up{job="nodemanager"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: NodeManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: NodeManager宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NodeManager堆内存使用率
            expr: java_lang_Memory_HeapMemoryUsage_used{job="YARN-NodeManager"}*100/java_lang_Memory_HeapMemoryUsage_max{job="YARN-NodeManager"} > 95
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NodeManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NodeManager老年代GC持续时间[5m]
            expr: avg_over_time(Hadoop_NodeManager_GcTimeMillisPS_MarkSweep{job="YARN-NodeManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NodeManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NodeManager新生代GC持续时间[5m]
            expr: avg_over_time(Hadoop_NodeManager_GcTimeMillisPS_Scavenge{job="YARN-NodeManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NodeManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: NodeManagerGC持续时间[5m]
            expr: avg_over_time(Hadoop_NodeManager_GcTimeMillis{job="YARN-NodeManager"}[5m])/(5*60*1000) > 60
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: warning
                clusterId: 1
                serviceRoleName: NodeManager
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 请联系管理员
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: KafkaBorker进程存活
            expr: up{job="kafkabroker"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: KafkaBroker
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: KafkaBroker宕机，请重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: TrinoCoordinator进程存活
            expr: up{job="trinocoordinator"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: TrinoCoordinator
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: TrinoWorker进程存活
            expr: up{job="trinoworker"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: TrinoWorker
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: 主机状态
            expr: up{job="node"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: node
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动该服务器
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: FE进程存活
            expr: up{group='fe'} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: FE
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: BE进程存活
            expr: up{group='be'} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: BE
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: SparkMaster进程存活
            expr: up{job="sparkmaster"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: SparkMaster
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: SparkWorker进程存活
            expr: up{job="sparkworker"} != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: SparkWorker
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
        -   alert: ElasticSearch进程存活
            expr: com_datasophon_ddh_worker_metrics_esMetrics_EsUp != 1
            labels:
                # severity: 指定告警级别。有三种等级，分别为warning、critical和emergency。严重等级依次递增。
                severity: exception
                clusterId: 1
                serviceRoleName: ElasticSearch
            annotations:
                # summary描述告警的概要信息
                # description用于描述告警的详细信息。
                summary: 重新启动
                description: "{{ $labels.job }}的{{ $labels.instance }}实例产生告警"
