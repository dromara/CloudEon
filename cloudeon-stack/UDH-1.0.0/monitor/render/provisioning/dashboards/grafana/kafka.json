{"annotations":{"list":[{"$$hashKey":"object:1508","builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":17,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"dateTimeAsIso"},"overrides":[]},"gridPos":{"h":4,"w":8,"x":0,"y":0},"id":68,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"process_start_time_seconds{job=\"kafkabroker\",instance=\"$kafkabroker\"}*1000","legendFormat":"__auto","range":true,"refId":"A"}],"title":"KafkaBroker启动时间","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":8,"y":0},"id":52,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"count(kafka_server_replicamanager_leadercount)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"在线Broker","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":12,"y":0},"id":54,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","repeatDirection":"h","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"expr":"sum(kafka_controller_kafkacontroller_activecontrollercount)","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"活跃的Controllers","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-text","inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"instance"},"properties":[{"id":"displayName","value":"Broker实例"},{"id":"unit","value":"short"},{"id":"decimals","value":2},{"id":"custom.align"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"displayName","value":"角色"},{"id":"unit","value":"short"},{"id":"decimals","value":2},{"id":"custom.align","value":"left"},{"id":"mappings","value":[{"options":{"0":{"index":1,"text":"follower"},"1":{"index":0,"text":"controller"}},"type":"value"}]}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"job"},"properties":[{"id":"custom.hidden","value":true}]}]},"gridPos":{"h":12,"w":8,"x":16,"y":0},"id":60,"interval":"","links":[],"options":{"footer":{"enablePagination":true,"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[{"desc":false,"displayName":"__name__"}]},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"kafka_controller_kafkacontroller_activecontrollercount{job=~\"kafkabroker\"}-0","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"broker","refId":"A"}],"title":"控制节点和从节点","transformations":[],"type":"table"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":0,"y":4},"id":56,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"expr":"sum(kafka_controller_kafkacontroller_globaltopiccount)","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"","refId":"A"}],"title":"Topic总数","type":"stat"},{"datasource":{"type":"datasource","uid":"grafana"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":4,"y":4},"id":36,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"datasource","uid":"grafana"},"expr":"sum(kafka_server_brokertopicmetrics_bytesin_total{topic != \"\"}-kafka_server_brokertopicmetrics_bytesout_total{topic != \"\"})","interval":"","legendFormat":"","refId":"A"}],"title":"未消费数据量","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":8,"y":4},"id":58,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"expr":"sum(kafka_server_replicamanager_partitioncount)","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"在线分区数","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":12,"y":4},"id":62,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"expr":"sum(kafka_controller_kafkacontroller_offlinepartitionscount{job=~\"kafkabroker\"})","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"","refId":"A"}],"title":"离线分区数","type":"stat"},{"datasource":{"type":"datasource","uid":"grafana"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":0,"y":8},"id":34,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"datasource","uid":"grafana"},"expr":"sum(kafka_server_replicamanager_isrexpands_total)","interval":"","legendFormat":"","refId":"A"}],"title":"ISR扩大速率","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"green","value":null},{"color":"#EAB839","value":70},{"color":"red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":4,"y":8},"id":38,"links":[],"maxDataPoints":100,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"avg(kafka_network_socketserver_networkprocessoravgidlepercent)","legendFormat":"__auto","range":true,"refId":"A"}],"title":"IO工作处理线程空闲率","transparent":true,"type":"gauge"},{"datasource":{"type":"datasource","uid":"grafana"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":8,"y":8},"id":32,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"datasource","uid":"grafana"},"expr":"sum(kafka_server_replicamanager_isrshrinks_total)","interval":"","legendFormat":"","refId":"A"}],"title":"ISR收缩速率","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":12,"y":8},"id":66,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":38},"textMode":"auto"},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"avg(jvm_memory_bytes_max{job='kafkabroker',area='heap'})","legendFormat":"__auto","range":true,"refId":"A"}],"title":"KafkaBroker堆内存大小","type":"stat"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"color-text","inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"percent"},"overrides":[{"matcher":{"id":"byName","options":"instance"},"properties":[{"id":"displayName","value":"Broker实例"},{"id":"unit","value":"short"},{"id":"decimals","value":2},{"id":"custom.align"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"displayName","value":"堆内存使用率"},{"id":"custom.align","value":"left"},{"id":"custom.displayMode","value":"gradient-gauge"},{"id":"min","value":1},{"id":"max","value":100},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}}]},{"matcher":{"id":"byName","options":"area"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"job"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.hidden","value":true}]}]},"gridPos":{"h":12,"w":12,"x":0,"y":12},"id":74,"interval":"","links":[],"options":{"footer":{"enablePagination":true,"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[{"desc":false,"displayName":"__name__"}]},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"jvm_memory_bytes_used{area=\"heap\",job=\"kafkabroker\"}*100/jvm_memory_bytes_max{area=\"heap\",job=\"kafkabroker\"}","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"broker","refId":"A"}],"title":"控制节点和从节点","transformations":[],"type":"table"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"links":[],"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":12,"w":12,"x":12,"y":12},"id":28,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"sum(rate(kafka_server_brokertopicmetrics_bytesin_total{topic =\"\"}[5m]))","legendFormat":"写入速率","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"sum(rate(kafka_server_brokertopicmetrics_bytesout_total{topic =\"\"}[5m]))","hide":false,"legendFormat":"消费速率","range":true,"refId":"B"}],"title":"消息写入消费速率","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"links":[],"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[{"matcher":{"id":"byName","options":"kafka_network_SocketServer_NetworkProcessorAvgIdlePercent{instance=\"192.168.40.17:9700\",job=\"kafka\"}"},"properties":[{"id":"color","value":{"fixedColor":"dark-green","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"kafka_network_SocketServer_NetworkProcessorAvgIdlePercent{instance=\"192.168.40.18:9700\",job=\"kafka\"}"},"properties":[{"id":"color","value":{"fixedColor":"light-blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"kafka_network_SocketServer_NetworkProcessorAvgIdlePercent{instance=\"192.168.40.19:9700\",job=\"kafka\"}"},"properties":[{"id":"color","value":{"fixedColor":"light-orange","mode":"fixed"}}]}]},"gridPos":{"h":11,"w":12,"x":0,"y":24},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"9.1.6","targets":[{"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"editorMode":"code","expr":"avg(kafka_server_kafkarequesthandlerpool_requesthandleravgidle_percent)","legendFormat":"__auto","range":true,"refId":"A"}],"title":"网络处理器线程空闲百分比","type":"timeseries"}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"text":"iflytek015:9991","value":"iflytek015:9991"},"datasource":{"type":"prometheus","uid":"hj6gjW44z"},"definition":"label_values(kafka_controller_kafkacontroller_controllerstate{job=\"kafkabroker\"}, instance)","hide":0,"includeAll":false,"label":"Broker","multi":false,"name":"kafkabroker","options":[],"query":{"query":"label_values(kafka_controller_kafkacontroller_controllerstate{job=\"kafkabroker\"}, instance)","refId":"Prometheus-kafkabroker-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Kafka","uid":"DGHHkJKWk","version":26,"weekStart":""}